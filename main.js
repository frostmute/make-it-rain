/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => RaindropToObsidian
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  raindropApiToken: "",
  defaultVaultLocation: "",
  fileNameTemplate: "{{title}}"
};
var RateLimiter = class {
  constructor() {
    this.requestCount = 0;
    this.resetTime = Date.now() + 6e4;
    // 1 minute window
    this.maxRequests = 120;
  }
  // Raindrop.io limit: 120 requests per minute
  async checkLimit() {
    const now = Date.now();
    if (now >= this.resetTime) {
      this.requestCount = 0;
      this.resetTime = now + 6e4;
    }
    if (this.requestCount >= this.maxRequests) {
      const waitTime = this.resetTime - now;
      await new Promise((resolve) => setTimeout(resolve, waitTime));
      this.requestCount = 0;
      this.resetTime = Date.now() + 6e4;
    }
    this.requestCount++;
  }
};
async function fetchWithRetry(url, options, rateLimiter, maxRetries = 3) {
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      await rateLimiter.checkLimit();
      const response = await fetch(url, options);
      if (response.ok) {
        return response;
      }
      if (response.status === 429) {
        const retryAfter = parseInt(response.headers.get("Retry-After") || "60");
        await new Promise((resolve) => setTimeout(resolve, retryAfter * 1e3));
        continue;
      }
      if (response.status >= 400 && response.status < 500) {
        throw new Error(`API Error: ${response.status} - ${await response.text()}`);
      }
      if (attempt < maxRetries - 1) {
        await new Promise(
          (resolve) => setTimeout(resolve, Math.pow(2, attempt) * 1e3)
        );
        continue;
      }
      throw new Error(`Failed after ${maxRetries} attempts: ${response.status}`);
    } catch (error) {
      if (attempt === maxRetries - 1)
        throw error;
      await new Promise(
        (resolve) => setTimeout(resolve, Math.pow(2, attempt) * 1e3)
      );
    }
  }
  throw new Error("Unexpected error in fetchWithRetry");
}
async function fetchCollectionInfo(collectionId, apiToken, rateLimiter) {
  const fetchOptions = {
    headers: {
      "Authorization": `Bearer ${apiToken}`,
      "Content-Type": "application/json"
    }
  };
  try {
    const response = await fetchWithRetry(
      `https://api.raindrop.io/rest/v1/collection/${collectionId}`,
      fetchOptions,
      rateLimiter
    );
    const data = await response.json();
    if (data.result && data.item) {
      return data.item;
    }
    console.error("Failed to fetch collection info:", data);
    return null;
  } catch (error) {
    console.error(`Error fetching collection info for ${collectionId}:`, error);
    return null;
  }
}
async function createFolderStructure(app, basePath, collectionTitle) {
  const sanitizedTitle = collectionTitle.replace(/[\\/:*?"<>|]/g, "_");
  const fullPath = basePath ? `${basePath}/${sanitizedTitle}` : sanitizedTitle;
  try {
    if (!await app.vault.adapter.exists(fullPath)) {
      await app.vault.createFolder(fullPath);
    }
    return fullPath;
  } catch (error) {
    console.error(`Error creating folder structure for ${fullPath}:`, error);
    throw error;
  }
}
var RaindropToObsidian = class extends import_obsidian.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.settings = { ...DEFAULT_SETTINGS };
    this.rateLimiter = new RateLimiter();
  }
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "fetch-raindrops",
      name: "Fetch Raindrops",
      callback: async () => {
        new RaindropFetchModal(this.app, this).open();
      }
    });
    this.addSettingTab(new RaindropToObsidianSettingTab(this.app, this));
    console.log("Make It Rain plugin loaded!");
  }
  onunload() {
    console.log("Make It Rain plugin unloaded.");
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  sanitizeFileName(name) {
    const invalidChars = /[\/\\:*?"<>|#%&{}$!@'`+=]/g;
    const replacement = "";
    let sanitizedName = name.replace(invalidChars, replacement).trim();
    if (!sanitizedName)
      sanitizedName = "Unnamed_Raindrop";
    return sanitizedName.substring(0, 200);
  }
  generateFileName(raindrop, useRaindropTitleForFileName) {
    var _a;
    const { fileNameTemplate } = this.settings;
    if (!useRaindropTitleForFileName) {
      return this.sanitizeFileName((raindrop.id || "unknown_id").toString());
    }
    let fileName = fileNameTemplate;
    const replacePlaceholder = (placeholder, value) => {
      const safeValue = this.sanitizeFileName(value);
      const regex = new RegExp(`{{${placeholder}}}`, "gi");
      fileName = fileName.replace(regex, safeValue);
    };
    try {
      replacePlaceholder("title", raindrop.title || "Untitled");
      replacePlaceholder("id", (raindrop.id || "unknown_id").toString());
      replacePlaceholder("collectionTitle", ((_a = raindrop.collection) == null ? void 0 : _a.title) || "No Collection");
      const createdDate = raindrop.created ? new Date(raindrop.created) : null;
      let formattedDate = "no_date";
      if (createdDate && !isNaN(createdDate.getTime())) {
        formattedDate = createdDate.toISOString().split("T")[0];
      }
      replacePlaceholder("date", formattedDate);
    } catch (error) {
      let errorMsg = "template processing error";
      if (error instanceof Error)
        errorMsg = error.message;
      console.error("Error processing file name template:", errorMsg, error);
      new import_obsidian.Notice("Error generating file name. Check console or template.");
      return "Error_Filename_" + Date.now();
    }
    let finalFileName = this.sanitizeFileName(fileName);
    if (!finalFileName.trim()) {
      return "Unnamed_Raindrop_" + (raindrop.id || Date.now());
    }
    return finalFileName;
  }
  async fetchRaindrops(options) {
    var _a;
    new import_obsidian.Notice("Fetching raindrops...", 3e3);
    const { raindropApiToken } = this.settings;
    const { vaultPath, collections, apiFilterTags, includeSubcollections, appendTagsToNotes, useRaindropTitleForFileName, tagMatchType } = options;
    if (!raindropApiToken) {
      new import_obsidian.Notice("Raindrop API token is not set. Please configure it in the plugin settings.", 1e4);
      return;
    }
    const collectionIds = collections.split(",").map((id) => id.trim()).filter((id) => id !== "");
    const filterTagsArray = apiFilterTags.split(",").map((tag) => tag.trim()).filter((tag) => tag !== "");
    let searchParameterString = "";
    if (filterTagsArray.length > 0) {
      console.log("Tag match type:", tagMatchType);
      console.log("Original tags:", filterTagsArray);
      if (tagMatchType === "all") {
        searchParameterString = filterTagsArray.map((tag) => {
          const cleanTag = tag.trim().replace(/^#/, "");
          return tag.includes(" ") ? `"${cleanTag}"` : cleanTag;
        }).join(" ");
        searchParameterString = `#${searchParameterString}`;
      } else {
        searchParameterString = "";
      }
      console.log("Constructed search query:", searchParameterString);
    }
    const baseApiUrl = "https://api.raindrop.io/rest/v1";
    let allData = [];
    const perPage = 50;
    try {
      let fetchMode = "all";
      if (collectionIds.length > 0)
        fetchMode = "collections";
      else if (searchParameterString || filterTagsArray.length > 0)
        fetchMode = "tags";
      const fetchOptions = {
        headers: {
          "Authorization": `Bearer ${raindropApiToken}`,
          "Content-Type": "application/json"
        }
      };
      if (fetchMode === "collections") {
        for (const collectionId of collectionIds) {
          let hasMore = true;
          let page = 0;
          while (hasMore) {
            const params = new URLSearchParams({
              perpage: perPage.toString(),
              page: page.toString()
            });
            if (includeSubcollections) {
              params.append("nested", "true");
            }
            if (searchParameterString) {
              params.append("search", searchParameterString);
            }
            const currentApiUrl = `${baseApiUrl}/raindrops/${collectionId}?${params.toString()}`;
            console.log(`Requesting collection ${collectionId} with${includeSubcollections ? "" : "out"} nested items:`, currentApiUrl);
            const response = await fetchWithRetry(currentApiUrl, fetchOptions, this.rateLimiter);
            const data = await response.json();
            if (!data.result) {
              console.error(`API Error for collection ${collectionId}:`, data);
              throw new Error(`API Error: ${JSON.stringify(data)}`);
            }
            if (data == null ? void 0 : data.items) {
              allData = allData.concat(data.items);
              page++;
              hasMore = data.items.length === perPage;
              console.log(`Fetched ${data.items.length} items from collection ${collectionId}, page ${page}`);
            } else {
              console.warn(`Unexpected response for collection ${collectionId}. Stopping.`);
              hasMore = false;
            }
          }
        }
      } else if (fetchMode === "tags") {
        if (tagMatchType === "any" && filterTagsArray.length > 0) {
          const uniqueItems = /* @__PURE__ */ new Map();
          for (const tag of filterTagsArray) {
            let hasMore = true;
            let page = 0;
            while (hasMore) {
              const params = new URLSearchParams({
                perpage: perPage.toString(),
                page: page.toString(),
                search: `#${tag.trim()}`
                // Simple, reliable single-tag search
              });
              const currentApiUrl = `${baseApiUrl}/raindrops/0?${params.toString()}`;
              console.log(`Requesting items with tag: ${tag}`, currentApiUrl);
              const response = await fetchWithRetry(currentApiUrl, fetchOptions, this.rateLimiter);
              const data = await response.json();
              if (!data.result) {
                console.error(`API Error for tag ${tag}:`, data);
                continue;
              }
              console.log(`API Response for tag ${tag}:`, {
                result: data.result,
                itemCount: ((_a = data == null ? void 0 : data.items) == null ? void 0 : _a.length) || 0,
                totalCount: (data == null ? void 0 : data.count) || 0
              });
              if (data == null ? void 0 : data.items) {
                data.items.forEach((item) => {
                  if (!uniqueItems.has(item._id)) {
                    uniqueItems.set(item._id, item);
                  }
                });
                page++;
                hasMore = data.items.length === perPage;
                console.log(`Fetched ${data.items.length} items for tag ${tag}, page ${page}`);
              } else {
                hasMore = false;
              }
            }
          }
          allData = Array.from(uniqueItems.values());
          console.log(`Total unique items found across all tags: ${allData.length}`);
        } else {
          let hasMore = true;
          let page = 0;
          while (hasMore) {
            const params = new URLSearchParams({
              perpage: perPage.toString(),
              page: page.toString(),
              search: searchParameterString
            });
            const currentApiUrl = `${baseApiUrl}/raindrops/0?${params.toString()}`;
            console.log(`Requesting items with tags: ${searchParameterString}`, currentApiUrl);
            const response = await fetchWithRetry(currentApiUrl, fetchOptions, this.rateLimiter);
            const data = await response.json();
            if (!data.result) {
              console.error("API Error for tag search:", data);
              throw new Error(`API Error: ${JSON.stringify(data)}`);
            }
            if (data == null ? void 0 : data.items) {
              allData = allData.concat(data.items);
              page++;
              hasMore = data.items.length === perPage;
              console.log(`Fetched ${data.items.length} items with tags, page ${page}`);
            } else {
              hasMore = false;
            }
          }
        }
      } else {
        let hasMore = true;
        let page = 0;
        while (hasMore) {
          const params = new URLSearchParams({
            perpage: perPage.toString(),
            page: page.toString()
          });
          const currentApiUrl = `${baseApiUrl}/raindrops/0?${params.toString()}`;
          console.log("Requesting all items:", currentApiUrl);
          const response = await fetchWithRetry(currentApiUrl, fetchOptions, this.rateLimiter);
          const data = await response.json();
          if (!data.result) {
            console.error("API Error for all items fetch:", data);
            throw new Error(`API Error: ${JSON.stringify(data)}`);
          }
          if (data == null ? void 0 : data.items) {
            allData = allData.concat(data.items);
            page++;
            hasMore = data.items.length === perPage;
            console.log(`Fetched ${data.items.length} items, page ${page}`);
          } else {
            console.warn("Unexpected response for all items fetch. Stopping.");
            hasMore = false;
          }
        }
      }
      if (allData.length === 0) {
        if (collectionIds.length > 0 || searchParameterString || filterTagsArray.length > 0) {
          new import_obsidian.Notice("No raindrops found matching your criteria.", 5e3);
        } else {
          new import_obsidian.Notice("No raindrops found in your account.", 5e3);
        }
      } else {
        new import_obsidian.Notice(`Found ${allData.length} raindrops. Processing...`, 5e3);
        await this.processRaindrops(allData, vaultPath, appendTagsToNotes, useRaindropTitleForFileName);
      }
    } catch (error) {
      let errorMessage = "An unknown error occurred during fetch";
      if (error instanceof Error)
        errorMessage = error.message;
      else if (typeof error === "string")
        errorMessage = error;
      new import_obsidian.Notice(`Error fetching raindrops: ${errorMessage}`, 1e4);
      console.error("Error fetching Raindrop API:", error);
    }
  }
  async processRaindrops(raindrops, vaultPath, appendTagsToNotes, useRaindropTitleForFileName) {
    var _a, _b, _c, _d;
    const { app } = this;
    const settingsFMTags = appendTagsToNotes.split(",").map((tag) => tag.trim()).filter((tag) => tag !== "");
    if (vaultPath === void 0)
      vaultPath = this.settings.defaultVaultLocation;
    const targetFolderPath = (_a = vaultPath == null ? void 0 : vaultPath.trim()) != null ? _a : "";
    if (targetFolderPath) {
      try {
        const folder = app.vault.getAbstractFileByPath(targetFolderPath);
        if (!folder) {
          console.log(`Creating base folder: ${targetFolderPath}`);
          await app.vault.createFolder(targetFolderPath);
        } else if (!folder.hasOwnProperty("children")) {
          throw new Error(`Path exists but is not a folder: ${targetFolderPath}`);
        }
      } catch (error) {
        let errorMsg = "folder creation failed";
        if (error instanceof Error)
          errorMsg = error.message;
        new import_obsidian.Notice(`Failed to create/verify base folder: ${targetFolderPath}. Error: ${errorMsg}.`, 1e4);
        console.error("Error with folder operation:", error);
        return;
      }
    }
    const raindropsByCollection = {};
    const collectionInfo = {};
    for (const raindrop of raindrops) {
      if ((_b = raindrop.collection) == null ? void 0 : _b.$id) {
        const collectionId = raindrop.collection.$id.toString();
        if (!raindropsByCollection[collectionId]) {
          raindropsByCollection[collectionId] = [];
          if (!collectionInfo[collectionId]) {
            const info = await fetchCollectionInfo(collectionId, this.settings.raindropApiToken, this.rateLimiter);
            if (info) {
              collectionInfo[collectionId] = info;
            }
          }
        }
        raindropsByCollection[collectionId].push(raindrop);
      } else {
        if (!raindropsByCollection["uncategorized"]) {
          raindropsByCollection["uncategorized"] = [];
        }
        raindropsByCollection["uncategorized"].push(raindrop);
      }
    }
    let createdCount = 0;
    let skippedCount = 0;
    let errorCount = 0;
    const total = raindrops.length;
    let processed = 0;
    for (const [collectionId, collectionRaindrops] of Object.entries(raindropsByCollection)) {
      try {
        let collectionPath = targetFolderPath;
        if (collectionId !== "uncategorized" && collectionInfo[collectionId]) {
          const collection = collectionInfo[collectionId];
          collectionPath = await createFolderStructure(app, targetFolderPath, collection.title);
        } else if (collectionId === "uncategorized") {
          collectionPath = await createFolderStructure(app, targetFolderPath, "Uncategorized");
        }
        for (const raindrop of collectionRaindrops) {
          try {
            const generatedFilename = this.generateFileName(raindrop, useRaindropTitleForFileName);
            const filePath = `${collectionPath}/${generatedFilename}.md`;
            if (await app.vault.adapter.exists(filePath)) {
              console.log(`Skipping existing file: ${filePath}`);
              skippedCount++;
              processed++;
              if (processed % 10 === 0) {
                new import_obsidian.Notice(`Progress: ${processed}/${total} raindrops processed...`, 3e3);
              }
              continue;
            }
            const rdTitle = raindrop.title || "Untitled Raindrop";
            const rdNoteContent = raindrop.note || "";
            const rdExcerpt = raindrop.excerpt || "";
            const rdSourceUrl = raindrop.link;
            const rdCoverUrl = raindrop.cover || "";
            let fileContent = "---\n";
            fileContent += `title: "${rdTitle.replace(/"/g, '\\"')}"
`;
            if (rdExcerpt) {
              if (rdExcerpt.includes("\n")) {
                fileContent += "description: |\n";
                rdExcerpt.split("\n").forEach(
                  (line) => fileContent += `  ${line.replace(/\s+$/, "")}
`
                );
              } else {
                fileContent += `description: "${rdExcerpt.replace(/"/g, '\\"')}"
`;
              }
            } else {
              fileContent += 'description: ""\n';
            }
            fileContent += `source: ${rdSourceUrl}
`;
            fileContent += `type: ${raindrop.type}
`;
            fileContent += `created: ${raindrop.created}
`;
            fileContent += `last_update: ${raindrop.lastUpdate}
`;
            if (collectionId !== "uncategorized" && collectionInfo[collectionId]) {
              const collection = collectionInfo[collectionId];
              fileContent += `collection:
`;
              fileContent += `  id: ${collection._id}
`;
              fileContent += `  title: "${collection.title.replace(/"/g, '\\"')}"
`;
              if ((_c = collection.parent) == null ? void 0 : _c.$id) {
                fileContent += `  parent_id: ${collection.parent.$id}
`;
              }
            }
            let combinedFMTags = [...settingsFMTags];
            if (raindrop.tags && Array.isArray(raindrop.tags)) {
              raindrop.tags.forEach((tag) => {
                const trimmedTag = tag.trim();
                if (trimmedTag && !combinedFMTags.includes(trimmedTag)) {
                  combinedFMTags.push(trimmedTag);
                }
              });
            }
            if (combinedFMTags.length > 0) {
              fileContent += "tags:\n";
              combinedFMTags.forEach((tag) => {
                const sanitizedTag = tag.replace(/ /g, "_").replace(/[^\w\u00C0-\u00FF\u0100-\u017F\u0180-\u024F\u1E00-\u1EFF\/-]+/g, "");
                if (sanitizedTag)
                  fileContent += `  - ${sanitizedTag}
`;
              });
            } else {
              fileContent += "tags: []\n";
            }
            if (rdCoverUrl) {
              fileContent += `banner: ${rdCoverUrl}
`;
            }
            fileContent += "---\n\n";
            if (rdCoverUrl) {
              const altText = this.sanitizeFileName(rdTitle === "Untitled Raindrop" ? "Cover Image" : rdTitle).replace(/\.md$/i, "");
              fileContent += `![${altText}](${rdCoverUrl})

`;
            }
            fileContent += `# ${rdTitle}

`;
            if (rdNoteContent)
              fileContent += `## Notes
${rdNoteContent}

`;
            if (rdExcerpt)
              fileContent += `## Description
${rdExcerpt}

`;
            if (raindrop.highlights && Array.isArray(raindrop.highlights) && raindrop.highlights.length > 0) {
              fileContent += "## Highlights\n";
              raindrop.highlights.forEach((highlight) => {
                if (highlight.text) {
                  fileContent += `- ${highlight.text.replace(/\r\n|\r|\n/g, " ")}
`;
                  if (highlight.note) {
                    fileContent += `  *Note:* ${highlight.note.replace(/\r\n|\r|\n/g, " ")}
`;
                  }
                }
              });
              fileContent += "\n";
            }
            await app.vault.create(filePath, fileContent);
            createdCount++;
            processed++;
            if (processed % 10 === 0) {
              new import_obsidian.Notice(`Progress: ${processed}/${total} raindrops processed...`, 3e3);
            }
          } catch (error) {
            errorCount++;
            processed++;
            let processErrorMsg = "An unknown error occurred";
            if (error instanceof Error)
              processErrorMsg = error.message;
            else if (typeof error === "string")
              processErrorMsg = error;
            const raindropTitleForError = (raindrop == null ? void 0 : raindrop.title) || "an unknown raindrop";
            new import_obsidian.Notice(`Error creating file for: ${raindropTitleForError}. Error: ${processErrorMsg}`, 1e4);
            console.error("Error creating file:", processErrorMsg, error, raindrop);
          }
        }
      } catch (error) {
        errorCount++;
        processed++;
        let collectionErrorMsg = "An unknown error occurred";
        if (error instanceof Error)
          collectionErrorMsg = error.message;
        else if (typeof error === "string")
          collectionErrorMsg = error;
        const collectionTitleForError = ((_d = collectionInfo[collectionId]) == null ? void 0 : _d.title) || "an unknown collection";
        new import_obsidian.Notice(`Error processing collection ${collectionTitleForError}: ${collectionErrorMsg}`, 1e4);
        console.error("Error processing collection:", collectionErrorMsg, error, collectionInfo[collectionId]);
      }
    }
    let summary = `${createdCount} notes created.`;
    if (skippedCount > 0)
      summary += ` ${skippedCount} skipped (already exist).`;
    if (errorCount > 0)
      summary += ` ${errorCount} errors.`;
    new import_obsidian.Notice(summary, 7e3);
    console.log(`Raindrop processing complete. Created: ${createdCount}, Skipped: ${skippedCount}, Errors: ${errorCount}`);
  }
};
var RaindropFetchModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.collections = "";
    this.apiFilterTags = "";
    this.includeSubcollections = false;
    this.appendTagsToNotes = "";
    this.useRaindropTitleForFileName = true;
    this.tagMatchType = "all";
    this.plugin = plugin;
    this.vaultPath = this.plugin.settings.defaultVaultLocation;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Fetch Raindrops Options" });
    contentEl.createEl("h3", { text: "Fetch Criteria" });
    new import_obsidian.Setting(contentEl).setName("Vault Folder (Optional)").setDesc("Target folder for notes. Leave blank for vault root or default setting.").addText((text) => {
      text.setPlaceholder(this.plugin.settings.defaultVaultLocation || "Vault Root").setValue(this.vaultPath).onChange((value) => {
        this.vaultPath = value.trim();
      });
    });
    new import_obsidian.Setting(contentEl).setName("Collections (comma-separated IDs)").setDesc("Leave blank to fetch from all collections (unless tags below are specified).").addText((text) => {
      text.setPlaceholder("e.g., 123,456").setValue(this.collections).onChange((value) => {
        this.collections = value;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Filter by Tags (comma-separated)").setDesc("Filter raindrops by tags.").addText((text) => {
      text.setPlaceholder("e.g., article, project-x").setValue(this.apiFilterTags).onChange((value) => {
        this.apiFilterTags = value;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Tag Match Type").setDesc("Should raindrops match ALL specified tags or ANY of them?").addDropdown((dropdown) => {
      dropdown.addOption("all", "Match ALL tags (AND)").addOption("any", "Match ANY tag (OR)").setValue(this.tagMatchType).onChange((value) => {
        this.tagMatchType = value;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Include Subcollections").setDesc("If filtering by Collection IDs, also include items from their subcollections.").addToggle((toggle) => {
      toggle.setValue(this.includeSubcollections).onChange((value) => {
        this.includeSubcollections = value;
      });
    });
    contentEl.createEl("h3", { text: "Note Options" });
    new import_obsidian.Setting(contentEl).setName("Append Tags to Note Frontmatter (comma-separated)").setDesc("Additional tags to add to the YAML frontmatter of each created note.").addText((text) => {
      text.setPlaceholder("e.g., #imported/raindrop").setValue(this.appendTagsToNotes).onChange((value) => {
        this.appendTagsToNotes = value;
      });
    });
    new import_obsidian.Setting(contentEl).setName("Use Raindrop Title for File Name").setDesc("Use title (via template) for filenames? If off, uses Raindrop ID.").addToggle((toggle) => {
      toggle.setValue(this.useRaindropTitleForFileName).onChange((value) => {
        this.useRaindropTitleForFileName = value;
      });
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Fetch Raindrops").setCta().onClick(async () => {
        const options = {
          vaultPath: this.vaultPath || void 0,
          collections: this.collections,
          apiFilterTags: this.apiFilterTags,
          includeSubcollections: this.includeSubcollections,
          appendTagsToNotes: this.appendTagsToNotes,
          useRaindropTitleForFileName: this.useRaindropTitleForFileName,
          tagMatchType: this.tagMatchType
        };
        this.close();
        await this.plugin.fetchRaindrops(options);
      });
    }).addButton((btn) => {
      btn.setButtonText("Cancel").onClick(() => {
        this.close();
      });
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var RaindropToObsidianSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("img", {
      attr: {
        src: "https://i.ibb.co/HTx7TnbN/makeitrain.png",
        width: "750"
      }
    });
    containerEl.createEl("h2", {
      text: "Import your Raindrop.io bookmarks into your Obsidian vault"
    });
    containerEl.createEl("p").createEl("a", {
      text: "Visit Raindrop.io website",
      href: "https://raindrop.io",
      attr: { target: "_blank", rel: "noopener noreferrer" }
    });
    containerEl.createEl("hr");
    containerEl.createEl("h3", { text: "API Configuration" });
    const apiDesc = containerEl.createDiv({ cls: "setting-item-description" });
    apiDesc.createSpan({ text: "You need to create a Test Token from your " });
    apiDesc.createEl("a", {
      text: "Raindrop.io Apps settings page",
      href: "https://app.raindrop.io/settings/integrations",
      attr: { target: "_blank", rel: "noopener noreferrer" }
    });
    apiDesc.createSpan({ text: "." });
    new import_obsidian.Setting(containerEl).setName("Raindrop.io API Token").addText((text) => {
      text.setPlaceholder("Enter your token").setValue(this.plugin.settings.raindropApiToken).onChange(async (value) => {
        this.plugin.settings.raindropApiToken = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("hr");
    containerEl.createEl("h3", { text: "Note Storage & Naming" });
    new import_obsidian.Setting(containerEl).setName("Default Vault Location for Notes").setDesc("Default folder to save notes if not specified in the fetch options modal. Leave blank for vault root.").addText((text) => {
      text.setPlaceholder("e.g., Raindrops/Inbox").setValue(this.plugin.settings.defaultVaultLocation).onChange(async (value) => {
        this.plugin.settings.defaultVaultLocation = value.trim();
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("p", {
      cls: "setting-item-description",
      text: 'Configure how filenames are generated when "Use Raindrop Title" is enabled in the fetch options modal. Uses Handlebars-like syntax.'
    });
    new import_obsidian.Setting(containerEl).setName("File Name Template").setDesc("Placeholders: {{title}}, {{id}}, {{collectionTitle}}, {{date}} (YYYY-MM-DD).").addText((text) => {
      text.setPlaceholder("{{title}}").setValue(this.plugin.settings.fileNameTemplate).onChange(async (value) => {
        this.plugin.settings.fileNameTemplate = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("hr");
    const footer = containerEl.createDiv({ cls: "setting-footer" });
    footer.createEl("p", {
      text: "Need help configuring or using the plugin? Check the README."
    });
    footer.createEl("a", {
      text: "Plugin GitHub Repository (Example)",
      href: "https://github.com/your-username/your-repo-name",
      attr: { target: "_blank", rel: "noopener noreferrer" }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1vZGFsLCBUZXh0Q29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsIFRvZ2dsZUNvbXBvbmVudCwgUGx1Z2luTWFuaWZlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIFJhaW5kcm9wLmlvIEFQSSBUeXBlc1xuaW50ZXJmYWNlIFJhaW5kcm9wSXRlbSB7XG4gICAgX2lkOiBudW1iZXI7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBleGNlcnB0Pzogc3RyaW5nO1xuICAgIG5vdGU/OiBzdHJpbmc7XG4gICAgbGluazogc3RyaW5nO1xuICAgIGNvdmVyPzogc3RyaW5nO1xuICAgIGNyZWF0ZWQ6IHN0cmluZztcbiAgICBsYXN0VXBkYXRlOiBzdHJpbmc7XG4gICAgdGFncz86IHN0cmluZ1tdO1xuICAgIGNvbGxlY3Rpb24/OiB7XG4gICAgICAgICRpZDogbnVtYmVyO1xuICAgICAgICB0aXRsZTogc3RyaW5nO1xuICAgIH07XG4gICAgaGlnaGxpZ2h0cz86IEFycmF5PHtcbiAgICAgICAgdGV4dDogc3RyaW5nO1xuICAgICAgICBub3RlPzogc3RyaW5nO1xuICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgY3JlYXRlZDogc3RyaW5nO1xuICAgIH0+O1xuICAgIHR5cGU6ICdsaW5rJyB8ICdhcnRpY2xlJyB8ICdpbWFnZScgfCAndmlkZW8nIHwgJ2RvY3VtZW50JyB8ICdhdWRpbyc7XG59XG5cbmludGVyZmFjZSBSYWluZHJvcFJlc3BvbnNlIHtcbiAgICByZXN1bHQ6IGJvb2xlYW47XG4gICAgaXRlbXM6IFJhaW5kcm9wSXRlbVtdO1xuICAgIGNvdW50PzogbnVtYmVyO1xuICAgIGNvbGxlY3Rpb25JZD86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE1vZGFsRmV0Y2hPcHRpb25zIHtcbiAgICB2YXVsdFBhdGg/OiBzdHJpbmc7XG4gICAgY29sbGVjdGlvbnM6IHN0cmluZztcbiAgICBhcGlGaWx0ZXJUYWdzOiBzdHJpbmc7XG4gICAgaW5jbHVkZVN1YmNvbGxlY3Rpb25zOiBib29sZWFuO1xuICAgIGFwcGVuZFRhZ3NUb05vdGVzOiBzdHJpbmc7XG4gICAgdXNlUmFpbmRyb3BUaXRsZUZvckZpbGVOYW1lOiBib29sZWFuO1xuICAgIHRhZ01hdGNoVHlwZTogJ2FsbCcgfCAnYW55Jztcbn1cblxuaW50ZXJmYWNlIFJhaW5kcm9wVG9PYnNpZGlhblNldHRpbmdzIHtcbiAgICByYWluZHJvcEFwaVRva2VuOiBzdHJpbmc7XG4gICAgZGVmYXVsdFZhdWx0TG9jYXRpb246IHN0cmluZztcbiAgICBmaWxlTmFtZVRlbXBsYXRlOiBzdHJpbmc7XG59XG5cbi8vIEFkZCBuZXcgaW50ZXJmYWNlIGZvciBDb2xsZWN0aW9uIGluZm9cbmludGVyZmFjZSBSYWluZHJvcENvbGxlY3Rpb24ge1xuICAgIF9pZDogbnVtYmVyO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgcGFyZW50Pzoge1xuICAgICAgICAkaWQ6IG51bWJlcjtcbiAgICB9O1xufVxuXG5pbnRlcmZhY2UgQ29sbGVjdGlvblJlc3BvbnNlIHtcbiAgICByZXN1bHQ6IGJvb2xlYW47XG4gICAgaXRlbXM6IFJhaW5kcm9wQ29sbGVjdGlvbltdO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBSYWluZHJvcFRvT2JzaWRpYW5TZXR0aW5ncyA9IHtcbiAgICByYWluZHJvcEFwaVRva2VuOiAnJyxcbiAgICBkZWZhdWx0VmF1bHRMb2NhdGlvbjogJycsXG4gICAgZmlsZU5hbWVUZW1wbGF0ZTogJ3t7dGl0bGV9fScsXG59O1xuXG4vLyBSYXRlIGxpbWl0aW5nIGFuZCByZXRyeSB1dGlsaXRpZXNcbmNsYXNzIFJhdGVMaW1pdGVyIHtcbiAgICBwcml2YXRlIHJlcXVlc3RDb3VudDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHJlc2V0VGltZTogbnVtYmVyID0gRGF0ZS5ub3coKSArIDYwMDAwOyAvLyAxIG1pbnV0ZSB3aW5kb3dcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1heFJlcXVlc3RzOiBudW1iZXIgPSAxMjA7IC8vIFJhaW5kcm9wLmlvIGxpbWl0OiAxMjAgcmVxdWVzdHMgcGVyIG1pbnV0ZVxuXG4gICAgYXN5bmMgY2hlY2tMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgLy8gUmVzZXQgY291bnRlciBpZiB3ZSdyZSBpbiBhIG5ldyB0aW1lIHdpbmRvd1xuICAgICAgICBpZiAobm93ID49IHRoaXMucmVzZXRUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VGltZSA9IG5vdyArIDYwMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSd2ZSBoaXQgdGhlIGxpbWl0LCB3YWl0IHVudGlsIHRoZSBuZXh0IHdpbmRvd1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0Q291bnQgPj0gdGhpcy5tYXhSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSB0aGlzLnJlc2V0VGltZSAtIG5vdztcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB3YWl0VGltZSkpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Q291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5yZXNldFRpbWUgPSBEYXRlLm5vdygpICsgNjAwMDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVxdWVzdENvdW50Kys7XG4gICAgfVxufVxuXG4vLyBGZXRjaCB3cmFwcGVyIHdpdGggYnVpbHQtaW4gcmV0cnkgbG9naWMgYW5kIHJhdGUgbGltaXRpbmdcbi8vIFRoaXMgZW5zdXJlcyByZWxpYWJsZSBBUEkgY29tbXVuaWNhdGlvbiBldmVuIHdpdGggdGVtcG9yYXJ5IGZhaWx1cmVzXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhSZXRyeSh1cmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQsIHJhdGVMaW1pdGVyOiBSYXRlTGltaXRlciwgbWF4UmV0cmllczogbnVtYmVyID0gMyk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgcmF0ZSBsaW1pdCBiZWZvcmUgZWFjaCBhdHRlbXB0XG4gICAgICAgICAgICBhd2FpdCByYXRlTGltaXRlci5jaGVja0xpbWl0KCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFuZGxlIHJhdGUgbGltaXRpbmcgcmVzcG9uc2VzIGZyb20gdGhlIEFQSVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdSZXRyeS1BZnRlcicpIHx8ICc2MCcpO1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCByZXRyeUFmdGVyICogMTAwMCkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGllbnQgZXJyb3JzICg0MDAtbGV2ZWwpIHVzdWFsbHkgaW5kaWNhdGUgYSBwcm9ibGVtIHdpdGggdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIC8vIFRoZXNlIHNob3VsZCBmYWlsIGZhc3QgYXMgcmV0cnlpbmcgd29uJ3QgaGVscFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgNTAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgRXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7YXdhaXQgcmVzcG9uc2UudGV4dCgpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgZXJyb3JzICg1MDAtbGV2ZWwpIG1pZ2h0IGJlIHRlbXBvcmFyeSwgc28gd2UgcmV0cnlcbiAgICAgICAgICAgIGlmIChhdHRlbXB0IDwgbWF4UmV0cmllcyAtIDEpIHtcbiAgICAgICAgICAgICAgICAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmOiB3YWl0IGxvbmdlciBiZXR3ZWVuIGVhY2ggcmV0cnlcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgucG93KDIsIGF0dGVtcHQpICogMTAwMClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCBhZnRlciAke21heFJldHJpZXN9IGF0dGVtcHRzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIE5ldHdvcmsgZXJyb3JzIG9yIG90aGVyIHVuZXhwZWN0ZWQgaXNzdWVzXG4gICAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gbWF4UmV0cmllcyAtIDEpIHRocm93IGVycm9yO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgucG93KDIsIGF0dGVtcHQpICogMTAwMClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGluIGZldGNoV2l0aFJldHJ5Jyk7XG59XG5cbi8vIENvbGxlY3Rpb24gaW5mbyBmZXRjaGluZyB3aXRoIGVycm9yIGhhbmRsaW5nIGFuZCByYXRlIGxpbWl0aW5nXG5hc3luYyBmdW5jdGlvbiBmZXRjaENvbGxlY3Rpb25JbmZvKGNvbGxlY3Rpb25JZDogc3RyaW5nLCBhcGlUb2tlbjogc3RyaW5nLCByYXRlTGltaXRlcjogUmF0ZUxpbWl0ZXIpOiBQcm9taXNlPFJhaW5kcm9wQ29sbGVjdGlvbiB8IG51bGw+IHtcbiAgICBjb25zdCBmZXRjaE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthcGlUb2tlbn1gLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIGNvbGxlY3Rpb24gZGV0YWlscyAtIHRoaXMgaGVscHMgd2l0aCBmb2xkZXIgb3JnYW5pemF0aW9uXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoXG4gICAgICAgICAgICBgaHR0cHM6Ly9hcGkucmFpbmRyb3AuaW8vcmVzdC92MS9jb2xsZWN0aW9uLyR7Y29sbGVjdGlvbklkfWAsXG4gICAgICAgICAgICBmZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICByYXRlTGltaXRlclxuICAgICAgICApO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0ICYmIGRhdGEuaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuaXRlbTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggY29sbGVjdGlvbiBpbmZvOicsIGRhdGEpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBOb24tZmF0YWwgZXJyb3IgLSB3ZSBjYW4gY29udGludWUgd2l0aG91dCBjb2xsZWN0aW9uIGluZm9cbiAgICAgICAgLy8gVGhlIGl0ZW1zIHdpbGwgYmUgcGxhY2VkIGluIHRoZSBiYXNlIGZvbGRlciBpbnN0ZWFkXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGNvbGxlY3Rpb24gaW5mbyBmb3IgJHtjb2xsZWN0aW9uSWR9OmAsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyBGb2xkZXIgY3JlYXRpb24gd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZvbGRlclN0cnVjdHVyZShhcHA6IEFwcCwgYmFzZVBhdGg6IHN0cmluZywgY29sbGVjdGlvblRpdGxlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIFNhbml0aXplIHRoZSBjb2xsZWN0aW9uIHRpdGxlIHRvIGNyZWF0ZSBhIHZhbGlkIGZvbGRlciBuYW1lXG4gICAgY29uc3Qgc2FuaXRpemVkVGl0bGUgPSBjb2xsZWN0aW9uVGl0bGUucmVwbGFjZSgvW1xcXFwvOio/XCI8PnxdL2csICdfJyk7XG4gICAgY29uc3QgZnVsbFBhdGggPSBiYXNlUGF0aCA/IGAke2Jhc2VQYXRofS8ke3Nhbml0aXplZFRpdGxlfWAgOiBzYW5pdGl6ZWRUaXRsZTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICAvLyBDcmVhdGUgZm9sZGVyIG9ubHkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIGltcG9ydGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiBtdWx0aXBsZSB0aW1lc1xuICAgICAgICBpZiAoIShhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZnVsbFBhdGgpKSkge1xuICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmdWxsUGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bGxQYXRoO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNyZWF0aW5nIGZvbGRlciBzdHJ1Y3R1cmUgZm9yICR7ZnVsbFBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJldGhyb3cgYXMgdGhpcyBpcyBhIGNyaXRpY2FsIGVycm9yXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWluZHJvcFRvT2JzaWRpYW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogUmFpbmRyb3BUb09ic2lkaWFuU2V0dGluZ3M7XG4gIHByaXZhdGUgcmF0ZUxpbWl0ZXI6IFJhdGVMaW1pdGVyO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtYW5pZmVzdDogUGx1Z2luTWFuaWZlc3QpIHtcbiAgICBzdXBlcihhcHAsIG1hbmlmZXN0KTtcbiAgICB0aGlzLnNldHRpbmdzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTIH07XG4gICAgdGhpcy5yYXRlTGltaXRlciA9IG5ldyBSYXRlTGltaXRlcigpO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdmZXRjaC1yYWluZHJvcHMnLFxuICAgICAgbmFtZTogJ0ZldGNoIFJhaW5kcm9wcycsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBuZXcgUmFpbmRyb3BGZXRjaE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFJhaW5kcm9wVG9PYnNpZGlhblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICBjb25zb2xlLmxvZygnTWFrZSBJdCBSYWluIHBsdWdpbiBsb2FkZWQhJyk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnTWFrZSBJdCBSYWluIHBsdWdpbiB1bmxvYWRlZC4nKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG5cbiAgc2FuaXRpemVGaWxlTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGludmFsaWRDaGFycyA9IC9bXFwvXFxcXDoqP1wiPD58IyUme30kIUAnYCs9XS9nO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gJyc7XG4gICAgbGV0IHNhbml0aXplZE5hbWUgPSBuYW1lLnJlcGxhY2UoaW52YWxpZENoYXJzLCByZXBsYWNlbWVudCkudHJpbSgpO1xuICAgIGlmICghc2FuaXRpemVkTmFtZSkgc2FuaXRpemVkTmFtZSA9IFwiVW5uYW1lZF9SYWluZHJvcFwiO1xuICAgIHJldHVybiBzYW5pdGl6ZWROYW1lLnN1YnN0cmluZygwLCAyMDApO1xuICB9XG5cbiAgZ2VuZXJhdGVGaWxlTmFtZShyYWluZHJvcDogYW55LCB1c2VSYWluZHJvcFRpdGxlRm9yRmlsZU5hbWU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgZmlsZU5hbWVUZW1wbGF0ZSB9ID0gdGhpcy5zZXR0aW5ncztcblxuICAgIGlmICghdXNlUmFpbmRyb3BUaXRsZUZvckZpbGVOYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKChyYWluZHJvcC5pZCB8fCAndW5rbm93bl9pZCcpLnRvU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIGxldCBmaWxlTmFtZSA9IGZpbGVOYW1lVGVtcGxhdGU7XG4gICAgY29uc3QgcmVwbGFjZVBsYWNlaG9sZGVyID0gKHBsYWNlaG9sZGVyOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc2FmZVZhbHVlID0gdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKHZhbHVlKTtcbiAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGB7eyR7cGxhY2Vob2xkZXJ9fX1gLCAnZ2knKTtcbiAgICAgICAgZmlsZU5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKHJlZ2V4LCBzYWZlVmFsdWUpO1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgICByZXBsYWNlUGxhY2Vob2xkZXIoJ3RpdGxlJywgcmFpbmRyb3AudGl0bGUgfHwgJ1VudGl0bGVkJyk7XG4gICAgICAgIHJlcGxhY2VQbGFjZWhvbGRlcignaWQnLCAocmFpbmRyb3AuaWQgfHwgJ3Vua25vd25faWQnKS50b1N0cmluZygpKTtcbiAgICAgICAgcmVwbGFjZVBsYWNlaG9sZGVyKCdjb2xsZWN0aW9uVGl0bGUnLCByYWluZHJvcC5jb2xsZWN0aW9uPy50aXRsZSB8fCAnTm8gQ29sbGVjdGlvbicpO1xuXG4gICAgICAgIGNvbnN0IGNyZWF0ZWREYXRlID0gcmFpbmRyb3AuY3JlYXRlZCA/IG5ldyBEYXRlKHJhaW5kcm9wLmNyZWF0ZWQpIDogbnVsbDtcbiAgICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSAnbm9fZGF0ZSc7XG4gICAgICAgIGlmIChjcmVhdGVkRGF0ZSAmJiAhaXNOYU4oY3JlYXRlZERhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgICAgIGZvcm1hdHRlZERhdGUgPSBjcmVhdGVkRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZVBsYWNlaG9sZGVyKCdkYXRlJywgZm9ybWF0dGVkRGF0ZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsZXQgZXJyb3JNc2cgPSAndGVtcGxhdGUgcHJvY2Vzc2luZyBlcnJvcic7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSBlcnJvck1zZyA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIGZpbGUgbmFtZSB0ZW1wbGF0ZTpcIiwgZXJyb3JNc2csIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGdlbmVyYXRpbmcgZmlsZSBuYW1lLiBDaGVjayBjb25zb2xlIG9yIHRlbXBsYXRlLlwiKTtcbiAgICAgICAgcmV0dXJuIFwiRXJyb3JfRmlsZW5hbWVfXCIgKyBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIGxldCBmaW5hbEZpbGVOYW1lID0gdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKGZpbGVOYW1lKTtcbiAgICBpZiAoIWZpbmFsRmlsZU5hbWUudHJpbSgpKSB7XG4gICAgICAgIHJldHVybiBcIlVubmFtZWRfUmFpbmRyb3BfXCIgKyAocmFpbmRyb3AuaWQgfHwgRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIHJldHVybiBmaW5hbEZpbGVOYW1lO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hSYWluZHJvcHMob3B0aW9uczogTW9kYWxGZXRjaE9wdGlvbnMpIHtcbiAgICBuZXcgTm90aWNlKCdGZXRjaGluZyByYWluZHJvcHMuLi4nLCAzMDAwKTtcbiAgICBjb25zdCB7IHJhaW5kcm9wQXBpVG9rZW4gfSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgY29uc3QgeyB2YXVsdFBhdGgsIGNvbGxlY3Rpb25zLCBhcGlGaWx0ZXJUYWdzLCBpbmNsdWRlU3ViY29sbGVjdGlvbnMsIGFwcGVuZFRhZ3NUb05vdGVzLCB1c2VSYWluZHJvcFRpdGxlRm9yRmlsZU5hbWUsIHRhZ01hdGNoVHlwZSB9ID0gb3B0aW9ucztcblxuICAgIGlmICghcmFpbmRyb3BBcGlUb2tlbikge1xuICAgICAgbmV3IE5vdGljZSgnUmFpbmRyb3AgQVBJIHRva2VuIGlzIG5vdCBzZXQuIFBsZWFzZSBjb25maWd1cmUgaXQgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncy4nLCAxMDAwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29sbGVjdGlvbklkcyA9IGNvbGxlY3Rpb25zLnNwbGl0KCcsJykubWFwKGlkID0+IGlkLnRyaW0oKSkuZmlsdGVyKGlkID0+IGlkICE9PSAnJyk7XG4gICAgY29uc3QgZmlsdGVyVGFnc0FycmF5ID0gYXBpRmlsdGVyVGFncy5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAodGFnID0+IHRhZy50cmltKCkpXG4gICAgICAgIC5maWx0ZXIodGFnID0+IHRhZyAhPT0gJycpO1xuXG4gICAgbGV0IHNlYXJjaFBhcmFtZXRlclN0cmluZyA9ICcnO1xuICAgIGlmIChmaWx0ZXJUYWdzQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVGFnIG1hdGNoIHR5cGU6JywgdGFnTWF0Y2hUeXBlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ09yaWdpbmFsIHRhZ3M6JywgZmlsdGVyVGFnc0FycmF5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0YWdNYXRjaFR5cGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAvLyBGb3IgQU5EIGxvZ2ljIChtYXRjaCBhbGwgdGFncyksIHdlIHVzZSBSYWluZHJvcCdzIGRlZmF1bHQgYmVoYXZpb3I6XG4gICAgICAgICAgICAvLyBBIHNwYWNlIGJldHdlZW4gdGFncyBtZWFucyBcIkFORFwiIC0gdGhlIGl0ZW0gbXVzdCBoYXZlIGFsbCB0YWdzXG4gICAgICAgICAgICAvLyBFeGFtcGxlOiBcIiN0YWcxIHRhZzIgdGFnM1wiIGZpbmRzIGl0ZW1zIHdpdGggQUxMIHRoZXNlIHRhZ3NcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtZXRlclN0cmluZyA9IGZpbHRlclRhZ3NBcnJheS5tYXAodGFnID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblRhZyA9IHRhZy50cmltKCkucmVwbGFjZSgvXiMvLCAnJyk7IC8vIFJlbW92ZSAjIGlmIHByZXNlbnRcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFnLmluY2x1ZGVzKCcgJykgPyBgXCIke2NsZWFuVGFnfVwiYCA6IGNsZWFuVGFnO1xuICAgICAgICAgICAgfSkuam9pbignICcpO1xuICAgICAgICAgICAgLy8gU2luZ2xlICMgcHJlZml4IGZvciB0aGUgZW50aXJlIHNlYXJjaCBzdHJpbmcgaXMgc3VmZmljaWVudCBmb3IgQU5EIGxvZ2ljXG4gICAgICAgICAgICBzZWFyY2hQYXJhbWV0ZXJTdHJpbmcgPSBgIyR7c2VhcmNoUGFyYW1ldGVyU3RyaW5nfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgT1IgbG9naWMgKG1hdGNoIGFueSB0YWcpLCB3ZSBoYW5kbGUgaXQgZGlmZmVyZW50bHk6XG4gICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIHRyeWluZyB0byBjb25zdHJ1Y3QgYSBjb21wbGV4IE9SIHF1ZXJ5ICh3aGljaCBoYXMgbGltaXRhdGlvbnMgaW4gdGhlIEFQSSksXG4gICAgICAgICAgICAvLyB3ZSBmZXRjaCBpdGVtcyBmb3IgZWFjaCB0YWcgc2VwYXJhdGVseSBhbmQgbWVyZ2UgdGhlIHJlc3VsdHNcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtZXRlclN0cmluZyA9ICcnOyAvLyBOb3QgdXNlZCBmb3IgT1IgbG9naWNcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ0NvbnN0cnVjdGVkIHNlYXJjaCBxdWVyeTonLCBzZWFyY2hQYXJhbWV0ZXJTdHJpbmcpO1xuICAgIH1cblxuICAgIGNvbnN0IGJhc2VBcGlVcmwgPSAnaHR0cHM6Ly9hcGkucmFpbmRyb3AuaW8vcmVzdC92MSc7XG4gICAgbGV0IGFsbERhdGE6IFJhaW5kcm9wSXRlbVtdID0gW107XG4gICAgY29uc3QgcGVyUGFnZSA9IDUwO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IGZldGNoTW9kZSA9ICdhbGwnO1xuICAgICAgICBpZiAoY29sbGVjdGlvbklkcy5sZW5ndGggPiAwKSBmZXRjaE1vZGUgPSAnY29sbGVjdGlvbnMnO1xuICAgICAgICBlbHNlIGlmIChzZWFyY2hQYXJhbWV0ZXJTdHJpbmcgfHwgZmlsdGVyVGFnc0FycmF5Lmxlbmd0aCA+IDApIGZldGNoTW9kZSA9ICd0YWdzJztcblxuICAgICAgICBjb25zdCBmZXRjaE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3JhaW5kcm9wQXBpVG9rZW59YCxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZldGNoTW9kZSA9PT0gJ2NvbGxlY3Rpb25zJykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uSWQgb2YgY29sbGVjdGlvbklkcykge1xuICAgICAgICAgICAgICAgIGxldCBoYXNNb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsZXQgcGFnZSA9IDA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKGhhc01vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJwYWdlOiBwZXJQYWdlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZVN1YmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCduZXN0ZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoUGFyYW1ldGVyU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdzZWFyY2gnLCBzZWFyY2hQYXJhbWV0ZXJTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QXBpVXJsID0gYCR7YmFzZUFwaVVybH0vcmFpbmRyb3BzLyR7Y29sbGVjdGlvbklkfT8ke3BhcmFtcy50b1N0cmluZygpfWA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXF1ZXN0aW5nIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9IHdpdGgke2luY2x1ZGVTdWJjb2xsZWN0aW9ucyA/ICcnIDogJ291dCd9IG5lc3RlZCBpdGVtczpgLCBjdXJyZW50QXBpVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoY3VycmVudEFwaVVybCwgZmV0Y2hPcHRpb25zLCB0aGlzLnJhdGVMaW1pdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBSYWluZHJvcFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIGZvciBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfTpgLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIEVycm9yOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YT8uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERhdGEgPSBhbGxEYXRhLmNvbmNhdChkYXRhLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2UrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01vcmUgPSBkYXRhLml0ZW1zLmxlbmd0aCA9PT0gcGVyUGFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZGF0YS5pdGVtcy5sZW5ndGh9IGl0ZW1zIGZyb20gY29sbGVjdGlvbiAke2NvbGxlY3Rpb25JZH0sIHBhZ2UgJHtwYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJlc3BvbnNlIGZvciBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfS4gU3RvcHBpbmcuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNb3JlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZmV0Y2hNb2RlID09PSAndGFncycpIHtcbiAgICAgICAgICAgIGlmICh0YWdNYXRjaFR5cGUgPT09ICdhbnknICYmIGZpbHRlclRhZ3NBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gSW1wbGVtZW50YXRpb24gb2YgT1IgbG9naWMgZm9yIHRhZ3M6XG4gICAgICAgICAgICAgICAgLy8gMS4gTWFrZSBzZXBhcmF0ZSBBUEkgY2FsbHMgZm9yIGVhY2ggdGFnXG4gICAgICAgICAgICAgICAgLy8gMi4gVXNlIGEgTWFwIHRvIHN0b3JlIHVuaXF1ZSBpdGVtcyAocHJldmVudHMgZHVwbGljYXRlcylcbiAgICAgICAgICAgICAgICAvLyAzLiBNZXJnZSBhbGwgcmVzdWx0cyB3aGlsZSBtYWludGFpbmluZyB1bmlxdWVuZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSXRlbXMgPSBuZXcgTWFwPG51bWJlciwgUmFpbmRyb3BJdGVtPigpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIGZpbHRlclRhZ3NBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGFzTW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYWdlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZldGNoIGFsbCBwYWdlcyBmb3IgdGhlIGN1cnJlbnQgdGFnXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChoYXNNb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJwYWdlOiBwZXJQYWdlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogYCMke3RhZy50cmltKCl9YCAvLyBTaW1wbGUsIHJlbGlhYmxlIHNpbmdsZS10YWcgc2VhcmNoXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFwaVVybCA9IGAke2Jhc2VBcGlVcmx9L3JhaW5kcm9wcy8wPyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXF1ZXN0aW5nIGl0ZW1zIHdpdGggdGFnOiAke3RhZ31gLCBjdXJyZW50QXBpVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShjdXJyZW50QXBpVXJsLCBmZXRjaE9wdGlvbnMsIHRoaXMucmF0ZUxpbWl0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBSYWluZHJvcFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIGZvciB0YWcgJHt0YWd9OmAsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgdGFnIGlmIHRoZXJlJ3MgYW4gZXJyb3IsIGJ1dCBjb250aW51ZSB3aXRoIG90aGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQVBJIFJlc3BvbnNlIGZvciB0YWcgJHt0YWd9OmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGRhdGEucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Db3VudDogZGF0YT8uaXRlbXM/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IGRhdGE/LmNvdW50IHx8IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YT8uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBpdGVtcyBpbiBNYXAgdXNpbmcgX2lkIGFzIGtleSB0byBhdXRvbWF0aWNhbGx5IGhhbmRsZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYW4gaXRlbSBoYXMgbXVsdGlwbGUgbWF0Y2hpbmcgdGFncywgdGhlIGxhc3Qgb25lIG92ZXJ3cml0ZXMgdGhlIHByZXZpb3VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHRoYXQncyBmaW5lIHNpbmNlIHRoZXkncmUgdGhlIHNhbWUgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1bmlxdWVJdGVtcy5oYXMoaXRlbS5faWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJdGVtcy5zZXQoaXRlbS5faWQsIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc01vcmUgPSBkYXRhLml0ZW1zLmxlbmd0aCA9PT0gcGVyUGFnZTsgLy8gQ29udGludWUgaWYgd2UgZ290IGEgZnVsbCBwYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtkYXRhLml0ZW1zLmxlbmd0aH0gaXRlbXMgZm9yIHRhZyAke3RhZ30sIHBhZ2UgJHtwYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNNb3JlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgTWFwIHZhbHVlcyBiYWNrIHRvIGFuIGFycmF5IGZvciBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgYWxsRGF0YSA9IEFycmF5LmZyb20odW5pcXVlSXRlbXMudmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUb3RhbCB1bmlxdWUgaXRlbXMgZm91bmQgYWNyb3NzIGFsbCB0YWdzOiAke2FsbERhdGEubGVuZ3RofWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPcmlnaW5hbCBBTkQgbG9naWMgb3Igc2luZ2xlIHRhZyBzZWFyY2ggdXNpbmcgdGhlIHNpbXBsZSBzcGFjZS1zZXBhcmF0ZWQgZm9ybWF0XG4gICAgICAgICAgICAgICAgbGV0IGhhc01vcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxldCBwYWdlID0gMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB3aGlsZSAoaGFzTW9yZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnBhZ2U6IHBlclBhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogc2VhcmNoUGFyYW1ldGVyU3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFwaVVybCA9IGAke2Jhc2VBcGlVcmx9L3JhaW5kcm9wcy8wPyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFJlcXVlc3RpbmcgaXRlbXMgd2l0aCB0YWdzOiAke3NlYXJjaFBhcmFtZXRlclN0cmluZ31gLCBjdXJyZW50QXBpVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoY3VycmVudEFwaVVybCwgZmV0Y2hPcHRpb25zLCB0aGlzLnJhdGVMaW1pdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBSYWluZHJvcFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yIGZvciB0YWcgc2VhcmNoOicsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgRXJyb3I6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhPy5pdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGF0YSA9IGFsbERhdGEuY29uY2F0KGRhdGEuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTW9yZSA9IGRhdGEuaXRlbXMubGVuZ3RoID09PSBwZXJQYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtkYXRhLml0ZW1zLmxlbmd0aH0gaXRlbXMgd2l0aCB0YWdzLCBwYWdlICR7cGFnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01vcmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBoYXNNb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBwYWdlID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKGhhc01vcmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICAgICAgcGVycGFnZTogcGVyUGFnZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QXBpVXJsID0gYCR7YmFzZUFwaVVybH0vcmFpbmRyb3BzLzA/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0aW5nIGFsbCBpdGVtczonLCBjdXJyZW50QXBpVXJsKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KGN1cnJlbnRBcGlVcmwsIGZldGNoT3B0aW9ucywgdGhpcy5yYXRlTGltaXRlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBSYWluZHJvcFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yIGZvciBhbGwgaXRlbXMgZmV0Y2g6JywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIEVycm9yOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZGF0YT8uaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsRGF0YSA9IGFsbERhdGEuY29uY2F0KGRhdGEuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBwYWdlKys7XG4gICAgICAgICAgICAgICAgICAgIGhhc01vcmUgPSBkYXRhLml0ZW1zLmxlbmd0aCA9PT0gcGVyUGFnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtkYXRhLml0ZW1zLmxlbmd0aH0gaXRlbXMsIHBhZ2UgJHtwYWdlfWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5leHBlY3RlZCByZXNwb25zZSBmb3IgYWxsIGl0ZW1zIGZldGNoLiBTdG9wcGluZy4nKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzTW9yZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbGxEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb25JZHMubGVuZ3RoID4gMCB8fCBzZWFyY2hQYXJhbWV0ZXJTdHJpbmcgfHwgZmlsdGVyVGFnc0FycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyByYWluZHJvcHMgZm91bmQgbWF0Y2hpbmcgeW91ciBjcml0ZXJpYS4nLCA1MDAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gcmFpbmRyb3BzIGZvdW5kIGluIHlvdXIgYWNjb3VudC4nLCA1MDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZvdW5kICR7YWxsRGF0YS5sZW5ndGh9IHJhaW5kcm9wcy4gUHJvY2Vzc2luZy4uLmAsIDUwMDApO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzUmFpbmRyb3BzKGFsbERhdGEsIHZhdWx0UGF0aCwgYXBwZW5kVGFnc1RvTm90ZXMsIHVzZVJhaW5kcm9wVGl0bGVGb3JGaWxlTmFtZSk7XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCBkdXJpbmcgZmV0Y2gnO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykgZXJyb3JNZXNzYWdlID0gZXJyb3I7XG4gICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGZldGNoaW5nIHJhaW5kcm9wczogJHtlcnJvck1lc3NhZ2V9YCwgMTAwMDApO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBSYWluZHJvcCBBUEk6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3NSYWluZHJvcHMocmFpbmRyb3BzOiBSYWluZHJvcEl0ZW1bXSwgdmF1bHRQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQsIGFwcGVuZFRhZ3NUb05vdGVzOiBzdHJpbmcsIHVzZVJhaW5kcm9wVGl0bGVGb3JGaWxlTmFtZTogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB0aGlzO1xuICAgIGNvbnN0IHNldHRpbmdzRk1UYWdzID0gYXBwZW5kVGFnc1RvTm90ZXMuc3BsaXQoJywnKS5tYXAodGFnID0+IHRhZy50cmltKCkpLmZpbHRlcih0YWcgPT4gdGFnICE9PSAnJyk7XG5cbiAgICBpZiAodmF1bHRQYXRoID09PSB1bmRlZmluZWQpIHZhdWx0UGF0aCA9IHRoaXMuc2V0dGluZ3MuZGVmYXVsdFZhdWx0TG9jYXRpb247XG4gICAgY29uc3QgdGFyZ2V0Rm9sZGVyUGF0aCA9IHZhdWx0UGF0aD8udHJpbSgpID8/IFwiXCI7XG5cbiAgICAvLyBDcmVhdGUgYmFzZSBmb2xkZXIgaWYgbmVlZGVkXG4gICAgaWYgKHRhcmdldEZvbGRlclBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGFyZ2V0Rm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyBiYXNlIGZvbGRlcjogJHt0YXJnZXRGb2xkZXJQYXRofWApO1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGFyZ2V0Rm9sZGVyUGF0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFmb2xkZXIuaGFzT3duUHJvcGVydHkoJ2NoaWxkcmVuJykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhdGggZXhpc3RzIGJ1dCBpcyBub3QgYSBmb2xkZXI6ICR7dGFyZ2V0Rm9sZGVyUGF0aH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxldCBlcnJvck1zZyA9ICdmb2xkZXIgY3JlYXRpb24gZmFpbGVkJztcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSBlcnJvck1zZyA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlL3ZlcmlmeSBiYXNlIGZvbGRlcjogJHt0YXJnZXRGb2xkZXJQYXRofS4gRXJyb3I6ICR7ZXJyb3JNc2d9LmAsIDEwMDAwKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aXRoIGZvbGRlciBvcGVyYXRpb246XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdyb3VwIHJhaW5kcm9wcyBieSBjb2xsZWN0aW9uXG4gICAgY29uc3QgcmFpbmRyb3BzQnlDb2xsZWN0aW9uOiB7IFtrZXk6IHN0cmluZ106IFJhaW5kcm9wSXRlbVtdIH0gPSB7fTtcbiAgICBjb25zdCBjb2xsZWN0aW9uSW5mbzogeyBba2V5OiBzdHJpbmddOiBSYWluZHJvcENvbGxlY3Rpb24gfSA9IHt9O1xuXG4gICAgLy8gRmlyc3QgcGFzczogZ3JvdXAgcmFpbmRyb3BzIGFuZCBjb2xsZWN0IHVuaXF1ZSBjb2xsZWN0aW9uIElEc1xuICAgIGZvciAoY29uc3QgcmFpbmRyb3Agb2YgcmFpbmRyb3BzKSB7XG4gICAgICAgIGlmIChyYWluZHJvcC5jb2xsZWN0aW9uPy4kaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9IHJhaW5kcm9wLmNvbGxlY3Rpb24uJGlkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoIXJhaW5kcm9wc0J5Q29sbGVjdGlvbltjb2xsZWN0aW9uSWRdKSB7XG4gICAgICAgICAgICAgICAgcmFpbmRyb3BzQnlDb2xsZWN0aW9uW2NvbGxlY3Rpb25JZF0gPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBGZXRjaCBjb2xsZWN0aW9uIGluZm8gaWYgd2UgaGF2ZW4ndCBhbHJlYWR5XG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uSW5mb1tjb2xsZWN0aW9uSWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBmZXRjaENvbGxlY3Rpb25JbmZvKGNvbGxlY3Rpb25JZCwgdGhpcy5zZXR0aW5ncy5yYWluZHJvcEFwaVRva2VuLCB0aGlzLnJhdGVMaW1pdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JbmZvW2NvbGxlY3Rpb25JZF0gPSBpbmZvO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmFpbmRyb3BzQnlDb2xsZWN0aW9uW2NvbGxlY3Rpb25JZF0ucHVzaChyYWluZHJvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgcmFpbmRyb3BzIHdpdGhvdXQgY29sbGVjdGlvblxuICAgICAgICAgICAgaWYgKCFyYWluZHJvcHNCeUNvbGxlY3Rpb25bJ3VuY2F0ZWdvcml6ZWQnXSkge1xuICAgICAgICAgICAgICAgIHJhaW5kcm9wc0J5Q29sbGVjdGlvblsndW5jYXRlZ29yaXplZCddID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByYWluZHJvcHNCeUNvbGxlY3Rpb25bJ3VuY2F0ZWdvcml6ZWQnXS5wdXNoKHJhaW5kcm9wKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjcmVhdGVkQ291bnQgPSAwO1xuICAgIGxldCBza2lwcGVkQ291bnQgPSAwO1xuICAgIGxldCBlcnJvckNvdW50ID0gMDtcbiAgICBjb25zdCB0b3RhbCA9IHJhaW5kcm9wcy5sZW5ndGg7XG4gICAgbGV0IHByb2Nlc3NlZCA9IDA7XG5cbiAgICAvLyBQcm9jZXNzIHJhaW5kcm9wcyBieSBjb2xsZWN0aW9uXG4gICAgZm9yIChjb25zdCBbY29sbGVjdGlvbklkLCBjb2xsZWN0aW9uUmFpbmRyb3BzXSBvZiBPYmplY3QuZW50cmllcyhyYWluZHJvcHNCeUNvbGxlY3Rpb24pKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgY29sbGVjdGlvblBhdGggPSB0YXJnZXRGb2xkZXJQYXRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgY29sbGVjdGlvbiBmb2xkZXIgaWYgd2UgaGF2ZSBpbmZvXG4gICAgICAgICAgICBpZiAoY29sbGVjdGlvbklkICE9PSAndW5jYXRlZ29yaXplZCcgJiYgY29sbGVjdGlvbkluZm9bY29sbGVjdGlvbklkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uSW5mb1tjb2xsZWN0aW9uSWRdO1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoID0gYXdhaXQgY3JlYXRlRm9sZGVyU3RydWN0dXJlKGFwcCwgdGFyZ2V0Rm9sZGVyUGF0aCwgY29sbGVjdGlvbi50aXRsZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb25JZCA9PT0gJ3VuY2F0ZWdvcml6ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblBhdGggPSBhd2FpdCBjcmVhdGVGb2xkZXJTdHJ1Y3R1cmUoYXBwLCB0YXJnZXRGb2xkZXJQYXRoLCAnVW5jYXRlZ29yaXplZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHJhaW5kcm9wcyBpbiB0aGlzIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmFpbmRyb3Agb2YgY29sbGVjdGlvblJhaW5kcm9wcykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlZEZpbGVuYW1lID0gdGhpcy5nZW5lcmF0ZUZpbGVOYW1lKHJhaW5kcm9wLCB1c2VSYWluZHJvcFRpdGxlRm9yRmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke2NvbGxlY3Rpb25QYXRofS8ke2dlbmVyYXRlZEZpbGVuYW1lfS5tZGA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTa2lwcGluZyBleGlzdGluZyBmaWxlOiAke2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzZWQgJSAxMCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFByb2dyZXNzOiAke3Byb2Nlc3NlZH0vJHt0b3RhbH0gcmFpbmRyb3BzIHByb2Nlc3NlZC4uLmAsIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZFRpdGxlID0gcmFpbmRyb3AudGl0bGUgfHwgJ1VudGl0bGVkIFJhaW5kcm9wJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmROb3RlQ29udGVudCA9IHJhaW5kcm9wLm5vdGUgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJkRXhjZXJwdCA9IHJhaW5kcm9wLmV4Y2VycHQgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJkU291cmNlVXJsID0gcmFpbmRyb3AubGluaztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmRDb3ZlclVybCA9IHJhaW5kcm9wLmNvdmVyIHx8ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWxlQ29udGVudCA9ICctLS1cXG4nO1xuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgdGl0bGU6IFwiJHtyZFRpdGxlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKX1cIlxcbmA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocmRFeGNlcnB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmRFeGNlcnB0LmluY2x1ZGVzKCdcXG4nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9ICdkZXNjcmlwdGlvbjogfFxcbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmRFeGNlcnB0LnNwbGl0KCdcXG4nKS5mb3JFYWNoKChsaW5lOiBzdHJpbmcpID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgICAke2xpbmUucmVwbGFjZSgvXFxzKyQvLCAnJyl9XFxuYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGBkZXNjcmlwdGlvbjogXCIke3JkRXhjZXJwdC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyl9XCJcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gJ2Rlc2NyaXB0aW9uOiBcIlwiXFxuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYHNvdXJjZTogJHtyZFNvdXJjZVVybH1cXG5gO1xuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgdHlwZTogJHtyYWluZHJvcC50eXBlfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGBjcmVhdGVkOiAke3JhaW5kcm9wLmNyZWF0ZWR9XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYGxhc3RfdXBkYXRlOiAke3JhaW5kcm9wLmxhc3RVcGRhdGV9XFxuYDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY29sbGVjdGlvbiBpbmZvcm1hdGlvbiB0byBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sbGVjdGlvbklkICE9PSAndW5jYXRlZ29yaXplZCcgJiYgY29sbGVjdGlvbkluZm9bY29sbGVjdGlvbklkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25JbmZvW2NvbGxlY3Rpb25JZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgY29sbGVjdGlvbjpcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYCAgaWQ6ICR7Y29sbGVjdGlvbi5faWR9XFxuYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAgIHRpdGxlOiBcIiR7Y29sbGVjdGlvbi50aXRsZS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyl9XCJcXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24ucGFyZW50Py4kaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgICBwYXJlbnRfaWQ6ICR7Y29sbGVjdGlvbi5wYXJlbnQuJGlkfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsZXQgY29tYmluZWRGTVRhZ3M6IHN0cmluZ1tdID0gWy4uLnNldHRpbmdzRk1UYWdzXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaW5kcm9wLnRhZ3MgJiYgQXJyYXkuaXNBcnJheShyYWluZHJvcC50YWdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFpbmRyb3AudGFncy5mb3JFYWNoKCh0YWc6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRUYWcgPSB0YWcudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmltbWVkVGFnICYmICFjb21iaW5lZEZNVGFncy5pbmNsdWRlcyh0cmltbWVkVGFnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lZEZNVGFncy5wdXNoKHRyaW1tZWRUYWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tYmluZWRGTVRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gJ3RhZ3M6XFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkRk1UYWdzLmZvckVhY2goKHRhZzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkVGFnID0gdGFnLnJlcGxhY2UoLyAvZywgXCJfXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcdTAwQzAtXFx1MDBGRlxcdTAxMDAtXFx1MDE3RlxcdTAxODAtXFx1MDI0RlxcdTFFMDAtXFx1MUVGRlxcLy1dKy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNhbml0aXplZFRhZykgZmlsZUNvbnRlbnQgKz0gYCAgLSAke3Nhbml0aXplZFRhZ31cXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSAndGFnczogW11cXG4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocmRDb3ZlclVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYGJhbm5lcjogJHtyZENvdmVyVXJsfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gJy0tLVxcblxcbic7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJkQ292ZXJVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdFRleHQgPSB0aGlzLnNhbml0aXplRmlsZU5hbWUocmRUaXRsZSA9PT0gJ1VudGl0bGVkIFJhaW5kcm9wJyA/ICdDb3ZlciBJbWFnZScgOiByZFRpdGxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC5tZCQvaSwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgKz0gYCFbJHthbHRUZXh0fV0oJHtyZENvdmVyVXJsfSlcXG5cXG5gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmaWxlQ29udGVudCArPSBgIyAke3JkVGl0bGV9XFxuXFxuYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJkTm90ZUNvbnRlbnQpIGZpbGVDb250ZW50ICs9IGAjIyBOb3Rlc1xcbiR7cmROb3RlQ29udGVudH1cXG5cXG5gO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmRFeGNlcnB0KSBmaWxlQ29udGVudCArPSBgIyMgRGVzY3JpcHRpb25cXG4ke3JkRXhjZXJwdH1cXG5cXG5gO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaW5kcm9wLmhpZ2hsaWdodHMgJiYgQXJyYXkuaXNBcnJheShyYWluZHJvcC5oaWdobGlnaHRzKSAmJiByYWluZHJvcC5oaWdobGlnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9ICcjIyBIaWdobGlnaHRzXFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhaW5kcm9wLmhpZ2hsaWdodHMuZm9yRWFjaCgoaGlnaGxpZ2h0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhpZ2hsaWdodC50ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAtICR7aGlnaGxpZ2h0LnRleHQucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZywgJyAnKX1cXG5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaGxpZ2h0Lm5vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9IGAgICpOb3RlOiogJHtoaWdobGlnaHQubm90ZS5yZXBsYWNlKC9cXHJcXG58XFxyfFxcbi9nLCAnICcpfVxcbmA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkKys7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2VkICUgMTAgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFByb2dyZXNzOiAke3Byb2Nlc3NlZH0vJHt0b3RhbH0gcmFpbmRyb3BzIHByb2Nlc3NlZC4uLmAsIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCsrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvY2Vzc0Vycm9yTXNnID0gJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgcHJvY2Vzc0Vycm9yTXNnID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykgcHJvY2Vzc0Vycm9yTXNnID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByYWluZHJvcFRpdGxlRm9yRXJyb3IgPSByYWluZHJvcD8udGl0bGUgfHwgJ2FuIHVua25vd24gcmFpbmRyb3AnO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvciBjcmVhdGluZyBmaWxlIGZvcjogJHtyYWluZHJvcFRpdGxlRm9yRXJyb3J9LiBFcnJvcjogJHtwcm9jZXNzRXJyb3JNc2d9YCwgMTAwMDApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmaWxlOicsIHByb2Nlc3NFcnJvck1zZywgZXJyb3IsIHJhaW5kcm9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICBwcm9jZXNzZWQrKztcbiAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uRXJyb3JNc2cgPSAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCc7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgY29sbGVjdGlvbkVycm9yTXNnID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIGNvbGxlY3Rpb25FcnJvck1zZyA9IGVycm9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uVGl0bGVGb3JFcnJvciA9IGNvbGxlY3Rpb25JbmZvW2NvbGxlY3Rpb25JZF0/LnRpdGxlIHx8ICdhbiB1bmtub3duIGNvbGxlY3Rpb24nO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcHJvY2Vzc2luZyBjb2xsZWN0aW9uICR7Y29sbGVjdGlvblRpdGxlRm9yRXJyb3J9OiAke2NvbGxlY3Rpb25FcnJvck1zZ31gLCAxMDAwMCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGNvbGxlY3Rpb246JywgY29sbGVjdGlvbkVycm9yTXNnLCBlcnJvciwgY29sbGVjdGlvbkluZm9bY29sbGVjdGlvbklkXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgc3VtbWFyeSA9IGAke2NyZWF0ZWRDb3VudH0gbm90ZXMgY3JlYXRlZC5gO1xuICAgIGlmIChza2lwcGVkQ291bnQgPiAwKSBzdW1tYXJ5ICs9IGAgJHtza2lwcGVkQ291bnR9IHNraXBwZWQgKGFscmVhZHkgZXhpc3QpLmA7XG4gICAgaWYgKGVycm9yQ291bnQgPiAwKSBzdW1tYXJ5ICs9IGAgJHtlcnJvckNvdW50fSBlcnJvcnMuYDtcbiAgICBuZXcgTm90aWNlKHN1bW1hcnksIDcwMDApO1xuICAgIGNvbnNvbGUubG9nKGBSYWluZHJvcCBwcm9jZXNzaW5nIGNvbXBsZXRlLiBDcmVhdGVkOiAke2NyZWF0ZWRDb3VudH0sIFNraXBwZWQ6ICR7c2tpcHBlZENvdW50fSwgRXJyb3JzOiAke2Vycm9yQ291bnR9YCk7XG4gIH1cbn1cblxuY2xhc3MgUmFpbmRyb3BGZXRjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFJhaW5kcm9wVG9PYnNpZGlhbjtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIGNvbGxlY3Rpb25zOiBzdHJpbmcgPSAnJztcbiAgYXBpRmlsdGVyVGFnczogc3RyaW5nID0gJyc7XG4gIGluY2x1ZGVTdWJjb2xsZWN0aW9uczogYm9vbGVhbiA9IGZhbHNlO1xuICBhcHBlbmRUYWdzVG9Ob3Rlczogc3RyaW5nID0gJyc7XG4gIHVzZVJhaW5kcm9wVGl0bGVGb3JGaWxlTmFtZTogYm9vbGVhbiA9IHRydWU7XG4gIHRhZ01hdGNoVHlwZTogJ2FsbCcgfCAnYW55JyA9ICdhbGwnO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFJhaW5kcm9wVG9PYnNpZGlhbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdFBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VmF1bHRMb2NhdGlvbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRmV0Y2ggUmFpbmRyb3BzIE9wdGlvbnMnIH0pO1xuXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZldGNoIENyaXRlcmlhJyB9KTtcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnVmF1bHQgRm9sZGVyIChPcHRpb25hbCknKVxuICAgICAgLnNldERlc2MoJ1RhcmdldCBmb2xkZXIgZm9yIG5vdGVzLiBMZWF2ZSBibGFuayBmb3IgdmF1bHQgcm9vdCBvciBkZWZhdWx0IHNldHRpbmcuJylcbiAgICAgIC5hZGRUZXh0KCh0ZXh0OiBUZXh0Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFZhdWx0TG9jYXRpb24gfHwgJ1ZhdWx0IFJvb3QnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnZhdWx0UGF0aClcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHsgdGhpcy52YXVsdFBhdGggPSB2YWx1ZS50cmltKCk7IH0pO1xuICAgICAgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0NvbGxlY3Rpb25zIChjb21tYS1zZXBhcmF0ZWQgSURzKScpXG4gICAgICAuc2V0RGVzYygnTGVhdmUgYmxhbmsgdG8gZmV0Y2ggZnJvbSBhbGwgY29sbGVjdGlvbnMgKHVubGVzcyB0YWdzIGJlbG93IGFyZSBzcGVjaWZpZWQpLicpXG4gICAgICAuYWRkVGV4dCgodGV4dDogVGV4dENvbXBvbmVudCkgPT4ge1xuICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdlLmcuLCAxMjMsNDU2JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5jb2xsZWN0aW9ucylcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHsgdGhpcy5jb2xsZWN0aW9ucyA9IHZhbHVlOyB9KTtcbiAgICAgIH0pO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdGaWx0ZXIgYnkgVGFncyAoY29tbWEtc2VwYXJhdGVkKScpXG4gICAgICAuc2V0RGVzYygnRmlsdGVyIHJhaW5kcm9wcyBieSB0YWdzLicpXG4gICAgICAuYWRkVGV4dCgodGV4dDogVGV4dENvbXBvbmVudCkgPT4ge1xuICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdlLmcuLCBhcnRpY2xlLCBwcm9qZWN0LXgnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmFwaUZpbHRlclRhZ3MpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7IHRoaXMuYXBpRmlsdGVyVGFncyA9IHZhbHVlOyB9KTtcbiAgICAgIH0pO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdUYWcgTWF0Y2ggVHlwZScpXG4gICAgICAuc2V0RGVzYygnU2hvdWxkIHJhaW5kcm9wcyBtYXRjaCBBTEwgc3BlY2lmaWVkIHRhZ3Mgb3IgQU5ZIG9mIHRoZW0/JylcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhbGwnLCAnTWF0Y2ggQUxMIHRhZ3MgKEFORCknKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2FueScsICdNYXRjaCBBTlkgdGFnIChPUiknKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnRhZ01hdGNoVHlwZSlcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy50YWdNYXRjaFR5cGUgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdJbmNsdWRlIFN1YmNvbGxlY3Rpb25zJylcbiAgICAgIC5zZXREZXNjKCdJZiBmaWx0ZXJpbmcgYnkgQ29sbGVjdGlvbiBJRHMsIGFsc28gaW5jbHVkZSBpdGVtcyBmcm9tIHRoZWlyIHN1YmNvbGxlY3Rpb25zLicpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IFRvZ2dsZUNvbXBvbmVudCkgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5pbmNsdWRlU3ViY29sbGVjdGlvbnMpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogYm9vbGVhbikgPT4geyB0aGlzLmluY2x1ZGVTdWJjb2xsZWN0aW9ucyA9IHZhbHVlOyB9KTtcbiAgICAgIH0pO1xuXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ05vdGUgT3B0aW9ucycgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0FwcGVuZCBUYWdzIHRvIE5vdGUgRnJvbnRtYXR0ZXIgKGNvbW1hLXNlcGFyYXRlZCknKVxuICAgICAgLnNldERlc2MoJ0FkZGl0aW9uYWwgdGFncyB0byBhZGQgdG8gdGhlIFlBTUwgZnJvbnRtYXR0ZXIgb2YgZWFjaCBjcmVhdGVkIG5vdGUuJylcbiAgICAgIC5hZGRUZXh0KCh0ZXh0OiBUZXh0Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJ2UuZy4sICNpbXBvcnRlZC9yYWluZHJvcCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYXBwZW5kVGFnc1RvTm90ZXMpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7IHRoaXMuYXBwZW5kVGFnc1RvTm90ZXMgPSB2YWx1ZTsgfSk7XG4gICAgICB9KTtcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnVXNlIFJhaW5kcm9wIFRpdGxlIGZvciBGaWxlIE5hbWUnKVxuICAgICAgLnNldERlc2MoJ1VzZSB0aXRsZSAodmlhIHRlbXBsYXRlKSBmb3IgZmlsZW5hbWVzPyBJZiBvZmYsIHVzZXMgUmFpbmRyb3AgSUQuJylcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZTogVG9nZ2xlQ29tcG9uZW50KSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnVzZVJhaW5kcm9wVGl0bGVGb3JGaWxlTmFtZSlcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBib29sZWFuKSA9PiB7IHRoaXMudXNlUmFpbmRyb3BUaXRsZUZvckZpbGVOYW1lID0gdmFsdWU7IH0pO1xuICAgICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuYWRkQnV0dG9uKChidG46IEJ1dHRvbkNvbXBvbmVudCkgPT4ge1xuICAgICAgICBidG4uc2V0QnV0dG9uVGV4dCgnRmV0Y2ggUmFpbmRyb3BzJylcbiAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zOiBNb2RhbEZldGNoT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgdmF1bHRQYXRoOiB0aGlzLnZhdWx0UGF0aCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25zOiB0aGlzLmNvbGxlY3Rpb25zLFxuICAgICAgICAgICAgICBhcGlGaWx0ZXJUYWdzOiB0aGlzLmFwaUZpbHRlclRhZ3MsXG4gICAgICAgICAgICAgIGluY2x1ZGVTdWJjb2xsZWN0aW9uczogdGhpcy5pbmNsdWRlU3ViY29sbGVjdGlvbnMsXG4gICAgICAgICAgICAgIGFwcGVuZFRhZ3NUb05vdGVzOiB0aGlzLmFwcGVuZFRhZ3NUb05vdGVzLFxuICAgICAgICAgICAgICB1c2VSYWluZHJvcFRpdGxlRm9yRmlsZU5hbWU6IHRoaXMudXNlUmFpbmRyb3BUaXRsZUZvckZpbGVOYW1lLFxuICAgICAgICAgICAgICB0YWdNYXRjaFR5cGU6IHRoaXMudGFnTWF0Y2hUeXBlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZldGNoUmFpbmRyb3BzKG9wdGlvbnMpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5hZGRCdXR0b24oKGJ0bjogQnV0dG9uQ29tcG9uZW50KSA9PiB7XG4gICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7IHRoaXMuY2xvc2UoKTsgfSk7XG4gICAgICB9KTtcbiAgfVxuICBvbkNsb3NlKCkgeyBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpczsgY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuY2xhc3MgUmFpbmRyb3BUb09ic2lkaWFuU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFJhaW5kcm9wVG9PYnNpZGlhbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBSYWluZHJvcFRvT2JzaWRpYW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICBhdHRyOiB7XG4gICAgICAgIHNyYzogXCJodHRwczovL2kuaWJiLmNvL0hUeDdUbmJOL21ha2VpdHJhaW4ucG5nXCIsXG4gICAgICAgIHdpZHRoOiBcIjc1MFwiXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7XG4gICAgICB0ZXh0OiAnSW1wb3J0IHlvdXIgUmFpbmRyb3AuaW8gYm9va21hcmtzIGludG8geW91ciBPYnNpZGlhbiB2YXVsdCdcbiAgICB9KTtcblxuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnKS5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgdGV4dDogJ1Zpc2l0IFJhaW5kcm9wLmlvIHdlYnNpdGUnLFxuICAgICAgICBocmVmOiAnaHR0cHM6Ly9yYWluZHJvcC5pbycsXG4gICAgICAgIGF0dHI6IHsgdGFyZ2V0OiAnX2JsYW5rJywgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicgfVxuICAgICB9KTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdocicpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQVBJIENvbmZpZ3VyYXRpb24nIH0pO1xuICAgIGNvbnN0IGFwaURlc2MgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuICAgIGFwaURlc2MuY3JlYXRlU3Bhbih7IHRleHQ6ICdZb3UgbmVlZCB0byBjcmVhdGUgYSBUZXN0IFRva2VuIGZyb20geW91ciAnfSk7XG4gICAgYXBpRGVzYy5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgdGV4dDogJ1JhaW5kcm9wLmlvIEFwcHMgc2V0dGluZ3MgcGFnZScsXG4gICAgICAgIGhyZWY6ICdodHRwczovL2FwcC5yYWluZHJvcC5pby9zZXR0aW5ncy9pbnRlZ3JhdGlvbnMnLFxuICAgICAgICBhdHRyOiB7IHRhcmdldDogJ19ibGFuaycsIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInIH1cbiAgICB9KTtcbiAgICBhcGlEZXNjLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnLid9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1JhaW5kcm9wLmlvIEFQSSBUb2tlbicpXG4gICAgICAuYWRkVGV4dCgodGV4dDogVGV4dENvbXBvbmVudCkgPT4ge1xuICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHRva2VuJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmFpbmRyb3BBcGlUb2tlbilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJhaW5kcm9wQXBpVG9rZW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaHInKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ05vdGUgU3RvcmFnZSAmIE5hbWluZycgfSk7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBWYXVsdCBMb2NhdGlvbiBmb3IgTm90ZXMnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgZm9sZGVyIHRvIHNhdmUgbm90ZXMgaWYgbm90IHNwZWNpZmllZCBpbiB0aGUgZmV0Y2ggb3B0aW9ucyBtb2RhbC4gTGVhdmUgYmxhbmsgZm9yIHZhdWx0IHJvb3QuJylcbiAgICAgIC5hZGRUZXh0KCh0ZXh0OiBUZXh0Q29tcG9uZW50KSA9PiB7XG4gICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJ2UuZy4sIFJhaW5kcm9wcy9JbmJveCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRWYXVsdExvY2F0aW9uKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFZhdWx0TG9jYXRpb24gPSB2YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge1xuICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG4gICAgICAgdGV4dDogJ0NvbmZpZ3VyZSBob3cgZmlsZW5hbWVzIGFyZSBnZW5lcmF0ZWQgd2hlbiBcIlVzZSBSYWluZHJvcCBUaXRsZVwiIGlzIGVuYWJsZWQgaW4gdGhlIGZldGNoIG9wdGlvbnMgbW9kYWwuIFVzZXMgSGFuZGxlYmFycy1saWtlIHN5bnRheC4nXG4gICAgIH0pO1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0ZpbGUgTmFtZSBUZW1wbGF0ZScpXG4gICAgICAuc2V0RGVzYygnUGxhY2Vob2xkZXJzOiB7e3RpdGxlfX0sIHt7aWR9fSwge3tjb2xsZWN0aW9uVGl0bGV9fSwge3tkYXRlfX0gKFlZWVktTU0tREQpLicpXG4gICAgICAuYWRkVGV4dCgodGV4dDogVGV4dENvbXBvbmVudCkgPT4ge1xuICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCd7e3RpdGxlfX0nKVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVOYW1lVGVtcGxhdGUpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZU5hbWVUZW1wbGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaHInKTtcblxuICAgICBjb25zdCBmb290ZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWZvb3RlcicgfSk7XG4gICAgIGZvb3Rlci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICB0ZXh0OiAnTmVlZCBoZWxwIGNvbmZpZ3VyaW5nIG9yIHVzaW5nIHRoZSBwbHVnaW4/IENoZWNrIHRoZSBSRUFETUUuJ1xuICAgICB9KTtcbiAgICAgZm9vdGVyLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICB0ZXh0OiAnUGx1Z2luIEdpdEh1YiBSZXBvc2l0b3J5IChFeGFtcGxlKScsXG4gICAgICAgIGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20veW91ci11c2VybmFtZS95b3VyLXJlcG8tbmFtZScsXG4gICAgICAgIGF0dHI6IHsgdGFyZ2V0OiAnX2JsYW5rJywgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicgfVxuICAgICB9KTtcblxuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUF1STtBQStEdkksSUFBTSxtQkFBK0M7QUFBQSxFQUNqRCxrQkFBa0I7QUFBQSxFQUNsQixzQkFBc0I7QUFBQSxFQUN0QixrQkFBa0I7QUFDdEI7QUFHQSxJQUFNLGNBQU4sTUFBa0I7QUFBQSxFQUFsQjtBQUNJLFNBQVEsZUFBdUI7QUFDL0IsU0FBUSxZQUFvQixLQUFLLElBQUksSUFBSTtBQUN6QztBQUFBLFNBQWlCLGNBQXNCO0FBQUE7QUFBQTtBQUFBLEVBRXZDLE1BQU0sYUFBNEI7QUFDOUIsVUFBTSxNQUFNLEtBQUssSUFBSTtBQUVyQixRQUFJLE9BQU8sS0FBSyxXQUFXO0FBQ3ZCLFdBQUssZUFBZTtBQUNwQixXQUFLLFlBQVksTUFBTTtBQUFBLElBQzNCO0FBR0EsUUFBSSxLQUFLLGdCQUFnQixLQUFLLGFBQWE7QUFDdkMsWUFBTSxXQUFXLEtBQUssWUFBWTtBQUNsQyxZQUFNLElBQUksUUFBUSxhQUFXLFdBQVcsU0FBUyxRQUFRLENBQUM7QUFDMUQsV0FBSyxlQUFlO0FBQ3BCLFdBQUssWUFBWSxLQUFLLElBQUksSUFBSTtBQUFBLElBQ2xDO0FBRUEsU0FBSztBQUFBLEVBQ1Q7QUFDSjtBQUlBLGVBQWUsZUFBZSxLQUFhLFNBQXNCLGFBQTBCLGFBQXFCLEdBQXNCO0FBQ2xJLFdBQVMsVUFBVSxHQUFHLFVBQVUsWUFBWSxXQUFXO0FBQ25ELFFBQUk7QUFFQSxZQUFNLFlBQVksV0FBVztBQUM3QixZQUFNLFdBQVcsTUFBTSxNQUFNLEtBQUssT0FBTztBQUV6QyxVQUFJLFNBQVMsSUFBSTtBQUNiLGVBQU87QUFBQSxN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

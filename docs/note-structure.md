# Note Structure in Make It Rain

This guide explains the structure of notes created by the Make It Rain plugin, both with the default (fallback) mechanism and when using the template system.

## Default Note Structure (Fallback - Templates Disabled)

When the template system is **disabled** in the plugin settings, Make It Rain creates notes with a basic, hardcoded structure. The frontmatter and body are generated as follows:

```markdown
---
id: 12345678
title: "Example Raindrop Title"
description: "This is the description or excerpt of the raindrop"
source: https://example.com
type: article
created: 2023-10-27T14:30:00Z
lastupdate: 2023-10-28T10:20:00Z 
collectionId: 98765
collectionTitle: "My Collection"
collectionPath: "Research/My Collection"
collectionParentId: 12345 # Only if a parent exists
tags:
  - example-tag
  - another-tag
banner: https://example.com/cover-image.jpg # Field name from settings
---

![Example Raindrop Title](https://example.com/cover-image.jpg)

# Example Raindrop Title

## Description
This is the description or excerpt of the raindrop

## Notes
These are notes added to the raindrop in Raindrop.io

## Highlights
- This is a highlighted text from the raindrop.
  *Note:* This is a note attached to the highlight.
- Another highlighted text from the raindrop.
```

### Key Frontmatter Fields (Fallback Structure)

- `id`: Raindrop ID.
- `title`: Raindrop title (double quotes escaped).
- `description`: Raindrop excerpt (double quotes escaped; uses `|` for multi-line).
- `source`: URL of the bookmark.
- `type`: Raw content type (e.g., `link`, `article`).
- `created`: Creation timestamp (ISO 8601).
- `lastupdate`: Last update timestamp (ISO 8601).
- `collectionId`: ID of the collection.
- `collectionTitle`: Title of the collection (double quotes escaped).
- `collectionPath`: Full path of the collection (double quotes escaped).
- `collectionParentId`: (Optional) ID of the parent collection.
- `tags`: List of tags from Raindrop.io (spaces replaced with `_`, special chars removed).
- The field name for `banner` (e.g., `banner:`, `cover:`) is taken from your plugin settings.

## Note Structure with Templates (Recommended)

When the [Template System](template-system.md) is **enabled**, you have **complete control** over the note structure. The examples above and below are illustrative of what *can* be generated by a template, specifically the plugin's built-in default template.

Refer to the [Template System documentation](template-system.md) and the [Template Gallery](template-gallery.md) for how to define variables and structure your notes.

### Example Structure using the Default Built-in Template

This is what the plugin's standard default template (used when the template system is on and no other template overrides it) produces:

```handlebars
---
title: "{{title}}" 
source: {{link}}
type: {{type}} 
created: {{created}}
lastupdate: {{lastupdate}} 
id: {{id}}
collectionId: {{collectionId}}
collectionTitle: "{{collectionTitle}}"
collectionPath: "{{collectionPath}}"
{{#if collectionParentId}}collectionParentId: {{collectionParentId}}{{/if}}
{{#if tags}}tags:
{{#each tags}}  - {{this}}
{{/each}}{{/if}}
{{#if cover}}{{bannerFieldName}}: {{cover}}{{/if}}
---

{{#if cover}}
![{{title}}]({{cover}})
{{/if}}

# {{title}}

{{#if excerpt}}
## Description
{{excerpt}}
{{/if}}

{{#if note}}
## Notes
{{note}}
{{/if}}

{{#if highlights}}
## Highlights
{{#each highlights}}
- {{text}}
{{#if note}}  *Note:* {{note}}{{/if}}
{{/each}}
{{/if}}

---
## Details
- **Type**: {{renderedType}}
- **Domain**: {{domain}}
- **Created**: {{formattedCreatedDate}}
- **Updated**: {{formattedUpdatedDate}}
- **Tags**: {{formattedTags}}
```

### Key Frontmatter Fields (Template System - Default Template)

When using the default template (or any custom template based on it), the following frontmatter fields are typically available and recommended:

- `id: {{id}}` (**Required for updates**)
- `title: "{{title}}"`
- `source: {{link}}`
- `type: {{type}}` (Raw type)
- `created: {{created}}` (ISO date)
- `lastupdate: {{lastupdate}}` (**Required for updates**)
- `collectionId: {{collectionId}}`
- `collectionTitle: "{{collectionTitle}}"`
- `collectionPath: "{{collectionPath}}"`
- `collectionParentId: {{collectionParentId}}` (Conditional, if parent exists)
- `tags:` (Iterated using `{{#each tags}}`)
- `{{bannerFieldName}}: {{cover}}` (Conditional, if cover exists; `bannerFieldName` is from settings)

### Note Body (Template System - Default Template)

The body generated by the default template typically includes:

1. **Cover Image**: (Conditional) `![{{title}}]({{cover}})`
2. **Title**: `# {{title}}`
3. **Description**: (Conditional) `## Description
 {{excerpt}}`
4. **Notes**: (Conditional) `## Notes
 {{note}}`
5. **Highlights**: (Conditional) Iterated list of highlights with their notes.
6. **Details Section**: A block with pre-formatted data:
    - Type: `{{renderedType}}`
    - Domain: `{{domain}}`
    - Created: `{{formattedCreatedDate}}`
    - Updated: `{{formattedUpdatedDate}}`
    - Tags: `{{formattedTags}}`

## Required Fields for Update Functionality

For the "Update existing notes" feature to work correctly, your note's frontmatter **must** contain:

- `id: {{id}}`
- `lastupdate: {{lastupdate}}`

If these are missing from your template, the plugin may not be able to identify or update notes correctly.

## Customizing Your Note Structure

The true power lies in customizing templates. You can:

- Rearrange any elements.
- Add or remove sections and variables.
- Use conditional logic (`{{#if}}`) for dynamic content.
- Tailor structures for different Raindrop content types (`article`, `video`, etc.).

Always refer to the [Template System documentation](template-system.md) for the full list of available variables and features.

## Tips for Effective Note Structures

1. **Consistent Frontmatter**: Keep your primary frontmatter fields consistent across your templates for easier searching, filtering, and use with Obsidian tools like Dataview.
2. **Meaningful Headings**: Use clear Markdown headings (`#`, `##`, `###`) to organize content within the note body.
3. **Link Back to Source**: Always include a way to get back to the original content, typically `[Source]({{link}})`or similar.
4. **Consider Obsidian Features**: Think about how Obsidian features like backlinks, embeds, and tags can interact with your note structure.

## Related Documentation

- [Template System](template-system.md): The main guide to understanding and creating templates.
- [Template Gallery](template-gallery.md): A collection of example templates.
- [Configuration](configuration.md): Plugin settings that can affect note output (e.g., `bannerFieldName`).
